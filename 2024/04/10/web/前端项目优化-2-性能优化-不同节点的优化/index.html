<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>前端项目优化-2. 性能优化-不同节点的优化 | mcdowell blog</title><meta name="description" content="性能优化的方向 说起性能优化，就得从 《从浏览器输入URL到页面渲染完成经历了哪些过程？》 这个问题。 基本总结下来就是分为两块 两部分： 加载层面 和 渲染层面  加载层面  就是项目文件的网络加载过程  加载层面就是网络在加载文件，核心要点就是快速加载 主要优化方向：  网络快  DNS 策略选择：   使用可靠的DNS服务提供商，避免 用户所在区域因为区域问题 导致 DNS 查询失败 使用"><meta property="og:type" content="article"><meta property="og:title" content="前端项目优化-2. 性能优化-不同节点的优化"><meta property="og:url" content="http://mcdowell8023.github.io/2024/04/10/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-2-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E4%B8%8D%E5%90%8C%E8%8A%82%E7%82%B9%E7%9A%84%E4%BC%98%E5%8C%96/index.html"><meta property="og:site_name" content="mcdowell博客"><meta property="og:description" content="性能优化的方向 说起性能优化，就得从 《从浏览器输入URL到页面渲染完成经历了哪些过程？》 这个问题。 基本总结下来就是分为两块 两部分： 加载层面 和 渲染层面  加载层面  就是项目文件的网络加载过程  加载层面就是网络在加载文件，核心要点就是快速加载 主要优化方向：  网络快  DNS 策略选择：   使用可靠的DNS服务提供商，避免 用户所在区域因为区域问题 导致 DNS 查询失败 使用"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2024-04-10T02:35:18.000Z"><meta property="article:modified_time" content="2025-03-08T05:05:57.115Z"><meta property="article:author" content="mcdowell"><meta property="article:tag" content="web"><meta property="article:tag" content="优化"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://mcdowell8023.github.io/2024/04/10/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-2-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E4%B8%8D%E5%90%8C%E8%8A%82%E7%82%B9%E7%9A%84%E4%BC%98%E5%8C%96/index.html"><link rel="alternate" href="/atom.xml" title="mcdowell博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/mcdowell8023" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">mcdowell</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Web 前端 &amp; 90后</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 北京, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">分类</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">标签</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">友链</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">关于</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/mcdowell8023" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="https://www.linkedin.com/in/%E6%98%BE%E8%B6%85-%E5%AD%9F-688582107/" target="_blank" title="Linkedin" data-toggle="tooltip" data-placement="top"><i class="icon icon-linkedin"></i></a></li><li><a href="https://mcdowell8023.gitee.io/" target="_blank" title="Coding" data-toggle="tooltip" data-placement="top"><i class="icon icon-coding"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">公告</h3><div class="widget-body"><div id="board"><div class="content"><p>但行好事莫问前程</p></div></div></div></div><div class="widget"><h3 class="widget-title">分类</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9F%BA%E7%A1%80/">基础</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%A2%E6%88%B7%E7%AB%AF/">客户端</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%B8%96/">技术帖</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8B%93%E5%B1%95/">拓展</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B8%A9%E5%9D%91/">踩坑</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%A1%B9%E7%9B%AE%E6%94%B9%E9%80%A0/">项目改造</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签云</h3><div class="widget-body tagcloud"><a href="/tags/Docker/" style="font-size:13.13px">Docker</a> <a href="/tags/HarmonyOS/" style="font-size:13.25px">HarmonyOS</a> <a href="/tags/SEO/" style="font-size:13px">SEO</a> <a href="/tags/ant-design/" style="font-size:13px">ant-design</a> <a href="/tags/api/" style="font-size:13px">api</a> <a href="/tags/git/" style="font-size:13.13px">git</a> <a href="/tags/hexoBlog/" style="font-size:13.13px">hexoBlog</a> <a href="/tags/http/" style="font-size:13.38px">http</a> <a href="/tags/js%E5%9F%BA%E7%A1%80/" style="font-size:13.63px">js基础</a> <a href="/tags/react/" style="font-size:13px">react</a> <a href="/tags/svn/" style="font-size:13px">svn</a> <a href="/tags/vue/" style="font-size:13px">vue</a> <a href="/tags/web/" style="font-size:13.5px">web</a> <a href="/tags/webrtc/" style="font-size:13.75px">webrtc</a> <a href="/tags/web%E7%A7%BB%E5%8A%A8%E7%AB%AF/" style="font-size:13px">web移动端</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size:13.5px">优化</a> <a href="/tags/%E5%85%BC%E5%AE%B9/" style="font-size:13px">兼容</a> <a href="/tags/%E5%8A%A8%E7%94%BB/" style="font-size:13px">动画</a> <a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size:13px">命令</a> <a href="/tags/%E5%AE%89%E5%8D%93/" style="font-size:13px">安卓</a> <a href="/tags/%E6%8B%93%E5%B1%95/" style="font-size:13.25px">拓展</a> <a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size:13px">浏览器</a> <a href="/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size:13px">环境变量</a> <a href="/tags/%E7%9B%B4%E6%92%AD/" style="font-size:13.88px">直播</a> <a href="/tags/%E7%A6%BB%E7%BA%BF%E5%8C%85/" style="font-size:13px">离线包</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size:14px">笔记</a> <a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size:13.13px">脚本</a> <a href="/tags/%E8%B0%83%E8%AF%95/" style="font-size:13.13px">调试</a> <a href="/tags/%E8%B8%A9%E5%9D%91/" style="font-size:13px">踩坑</a> <a href="/tags/%E8%BF%BD%E6%9C%AC%E6%BA%AF%E6%BA%90/" style="font-size:13.75px">追本溯源</a> <a href="/tags/%E9%80%9F%E6%9F%A5/" style="font-size:13px">速查</a> <a href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/" style="font-size:13px">音视频</a></div></div><div class="widget"><h3 class="widget-title">归档</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">八月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E5%AE%A2%E6%88%B7%E7%AB%AF/">客户端</a></p><p class="item-title"><a href="/2025/03/03/HarmonyOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HarmonyOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%BC%80%E5%8F%91%E6%9D%82%E8%AE%B0/" class="title">HarmonyOS学习笔记-开发杂记</a></p><p class="item-date"><time datetime="2025-03-03T12:33:27.000Z" itemprop="datePublished">2025-03-03</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E5%AE%A2%E6%88%B7%E7%AB%AF/">客户端</a></p><p class="item-title"><a href="/2025/03/02/HarmonyOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HarmonyOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20-%20har%20%E5%8C%85%E6%9E%84%E5%BB%BA&&%E5%8F%91%E5%B8%83/" class="title">HarmonyOS学习笔记 - har 包构建&amp;&amp;发布</a></p><p class="item-date"><time datetime="2025-03-02T10:26:47.000Z" itemprop="datePublished">2025-03-02</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E5%AE%A2%E6%88%B7%E7%AB%AF/">客户端</a></p><p class="item-title"><a href="/2025/01/16/HarmonyOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HarmonyOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%88%9D%E8%AF%86/" class="title">HarmonyOS学习笔记-初识</a></p><p class="item-date"><time datetime="2025-01-16T00:26:17.000Z" itemprop="datePublished">2025-01-16</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%B8%96/">技术帖</a></p><p class="item-title"><a href="/2024/11/15/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-7.h5%E7%A6%BB%E7%BA%BFZIP%E5%8C%85/" class="title">前端项目优化-7.h5离线ZIP包</a></p><p class="item-date"><time datetime="2024-11-15T06:37:34.000Z" itemprop="datePublished">2024-11-15</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%B8%96/">技术帖</a></p><p class="item-title"><a href="/2024/08/27/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-6.SEO%E6%8C%87%E5%8D%97/" class="title">前端项目优化-6.SEO指南</a></p><p class="item-date"><time datetime="2024-08-27T05:37:34.000Z" itemprop="datePublished">2024-08-27</time></p></div></li></ul></div></div><div class="widget"><h3 class="widget-title">标签</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HarmonyOS/" rel="tag">HarmonyOS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/" rel="tag">SEO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ant-design/" rel="tag">ant-design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/" rel="tag">api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexoBlog/" rel="tag">hexoBlog</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js%E5%9F%BA%E7%A1%80/" rel="tag">js基础</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/" rel="tag">svn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag">web</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webrtc/" rel="tag">webrtc</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web%E7%A7%BB%E5%8A%A8%E7%AB%AF/" rel="tag">web移动端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%BC%E5%AE%B9/" rel="tag">兼容</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E7%94%BB/" rel="tag">动画</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%91%BD%E4%BB%A4/" rel="tag">命令</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E5%8D%93/" rel="tag">安卓</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8B%93%E5%B1%95/" rel="tag">拓展</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">浏览器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" rel="tag">环境变量</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%B4%E6%92%AD/" rel="tag">直播</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A6%BB%E7%BA%BF%E5%8C%85/" rel="tag">离线包</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a><span class="tag-list-count">30</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC/" rel="tag">脚本</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E8%AF%95/" rel="tag">调试</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B8%A9%E5%9D%91/" rel="tag">踩坑</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%BD%E6%9C%AC%E6%BA%AF%E6%BA%90/" rel="tag">追本溯源</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%9F%E6%9F%A5/" rel="tag">速查</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/" rel="tag">音视频</a><span class="tag-list-count">1</span></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-web/前端项目优化-2-性能优化-不同节点的优化" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">前端项目优化-2. 性能优化-不同节点的优化</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2024/04/10/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-2-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E4%B8%8D%E5%90%8C%E8%8A%82%E7%82%B9%E7%9A%84%E4%BC%98%E5%8C%96/" class="article-date"><time datetime="2024-04-10T02:35:18.000Z" itemprop="datePublished">2024-04-10</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%B8%96/">技术帖</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/web/" rel="tag">web</a>, <a class="article-tag-link-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2024/04/10/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-2-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E4%B8%8D%E5%90%8C%E8%8A%82%E7%82%B9%E7%9A%84%E4%BC%98%E5%8C%96/#comments" class="article-comment-link">评论</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h2 id="性能优化的方向"><a class="markdownIt-Anchor" href="#性能优化的方向"></a> 性能优化的方向</h2><p>说起性能优化，就得从 《从浏览器输入URL到页面渲染完成经历了哪些过程？》 这个问题。</p><p>基本总结下来就是分为两块 两部分： <strong>加载层面</strong> 和 <strong>渲染层面</strong></p><h3 id="加载层面"><a class="markdownIt-Anchor" href="#加载层面"></a> 加载层面</h3><blockquote><p>就是项目文件的网络加载过程</p></blockquote><p>加载层面就是网络在加载文件，核心要点就是<strong>快速加载</strong></p><p>主要优化方向：</p><h4 id="网络快"><a class="markdownIt-Anchor" href="#网络快"></a> 网络快</h4><ol><li>DNS 策略选择：</li></ol><ul><li>使用可靠的DNS服务提供商，避免 用户所在区域因为区域问题 导致 DNS 查询失败</li><li>使用 <code>dns-prefetch</code>/ <code>preconnect</code>，将域名解析的 IP 地址缓存到本地。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 三方资源 DNS 预解析： --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//example.com&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 预链接，预先解析DNS 同时 还将进行 TCP 握手和建立传输层协议 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preconnect&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>使用<strong>CDN 加速</strong>，将文件放在离用户更近的地方。优先 使用 <code>CDN 预热</code></li><li>使用<strong>HTTP2.0</strong>，并行加载多个资源，有效减少加载时间 「通过多路复用、头部压缩等技术，可以显著提高网络性能」</li><li>避免重定向</li><li>减少请求数量，避免进入等待队列「 此处<strong>需要权衡取舍</strong>，避免单个文件过大 导致加载缓慢」：<code>图片转化成base64</code>、精灵图</li><li>提高服务器性能<ul><li>配置更高的服务器、使用SSD硬盘、增加服务器带宽</li><li>负载均衡：将用户请求分配到多台服务器，减少单台服务器的负载，Nginx。</li></ul></li></ol><h4 id="文件小-可能会导致http请求过多-注意平衡"><a class="markdownIt-Anchor" href="#文件小-可能会导致http请求过多-注意平衡"></a> 文件小 [可能会导致HTTP请求过多, 注意平衡]</h4><h5 id="树摇-tree-shaking"><a class="markdownIt-Anchor" href="#树摇-tree-shaking"></a> 树摇-Tree Shaking</h5><h6 id="webpack-5"><a class="markdownIt-Anchor" href="#webpack-5"></a> Webpack 5</h6><ul><li>默认支持 Tree Shaking，并在生产模式下自动启用。</li><li>使用 <code>ES Module</code> 语法（<code>import</code> 和 <code>export</code>），而不是 <code>CommonJS</code> 的 <code>require</code> 和 <code>module.exports</code>，以充分利用 Webpack 的静态分析功能。</li><li>在 <code>package.json</code>中设置 <code>sideEffects</code> 属性来标记模块是否存在副作用，这样可以更精确地优化。</li></ul><h6 id="vite"><a class="markdownIt-Anchor" href="#vite"></a> Vite</h6><p>Vite 基于 Rollup，默认支持 Tree Shaking，无需额外配置。</p><h5 id="按需加载"><a class="markdownIt-Anchor" href="#按需加载"></a> 按需加载</h5><p>使用的时候才加载 如： 路由懒加载、组件懒加载、 暂时不需要的文件动态导入</p><ol><li>动态导入组件、路由懒加载: 使用 ES6 的<code>() =&gt; import()</code> 语法动态导入路由组件。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">LazyComponent</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>( <span class="comment">/* webpackChunkName: &quot;lazy-component&quot; */</span> <span class="string">&#x27;./components/LazyComponent.vue&#x27;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="title class_">LazyComponent</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li><code>import().then</code>动态加载 模块: 任何你觉得比较占体积的包或者文件 都可以进行 动态导入。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./store/modules/largeModule&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">module</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 使用 module 中的内容</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="3"><li>vue3 中的 动态组件 使用 <code>defineAsyncComponent</code> 进行异步组件加载</li></ol><blockquote><p>支持指定加载中组件和错误处理组件，以及相关的延时和超时设置。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    defineAsyncComponent</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">LoadingComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./LoadingComponent.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ErrorComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ErrorComponent.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AsyncComponent</span> = <span class="title function_">defineAsyncComponent</span>(&#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./MyComponent.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">loadingComponent</span>: <span class="title class_">LoadingComponent</span>,</span><br><span class="line">    <span class="attr">errorComponent</span>: <span class="title class_">ErrorComponent</span>,</span><br><span class="line">    <span class="attr">delay</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">3000</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="4"><li>Vue3 中的异步组件：<code>&lt;Suspense&gt;</code>组件 包裹异步组件，提供加载中和错误处理的功能。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Suspense&gt;</span><br><span class="line">    &lt;template #default&gt;</span><br><span class="line">      &lt;AsyncComponent /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #fallback&gt;</span><br><span class="line">      &lt;div&gt;Loading...&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/Suspense&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; defineAsyncComponent &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">const AsyncComponent = defineAsyncComponent(() =&gt; import(&#x27;./MyComponent.vue&#x27;));</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    AsyncComponent,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ol start="5"><li>借助 Aiosx 进行 对非必要 文件 进行动态加载， 如 多语言模块等</li></ol><h5 id="代码分割"><a class="markdownIt-Anchor" href="#代码分割"></a> 代码分割</h5><h6 id="webpack-的-splitchunks"><a class="markdownIt-Anchor" href="#webpack-的-splitchunks"></a> Webpack 的 <code>SplitChunks</code></h6><p>Webpack 提供了代码分割的功能，可以自动将代码拆分为多个块，按需加载这些块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">            <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h6 id="vite中进行代码分割"><a class="markdownIt-Anchor" href="#vite中进行代码分割"></a> vite中进行代码分割</h6><ol><li>基于 Rollup 的 <code>manualChunks</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">build</span>: &#123;</span><br><span class="line">        <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">            <span class="attr">output</span>: &#123;</span><br><span class="line">                <span class="attr">manualChunks</span>: &#123;</span><br><span class="line">                    <span class="comment">// 手动指定分块</span></span><br><span class="line">                    <span class="string">&#x27;vue-vendor&#x27;</span>: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;vue-router&#x27;</span>],</span><br><span class="line">                    <span class="string">&#x27;element-plus&#x27;</span>: [<span class="string">&#x27;element-plus&#x27;</span>],</span><br><span class="line">                    <span class="string">&#x27;lodash-es&#x27;</span>: [<span class="string">&#x27;lodash-es&#x27;</span>],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li>基于 <code>viteplugin-chunk-split</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    defineConfig</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    chunkSplitPlugin</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-chunk-split&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">vue</span>(),</span><br><span class="line">        <span class="title function_">chunkSplitPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">customSplitting</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;vue-vendor&#x27;</span>: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;vue-router&#x27;</span>],</span><br><span class="line">                <span class="string">&#x27;element-plus&#x27;</span>: [<span class="string">&#x27;element-plus&#x27;</span>],</span><br><span class="line">                <span class="comment">// 支持正则表达式。src 中 components 下的所有文件会被打包为 `components-util` 的 chunk 中</span></span><br><span class="line">                <span class="string">&#x27;components-util&#x27;</span>: [<span class="regexp">/src\/components/</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">build</span>: &#123;</span><br><span class="line">        <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">            <span class="attr">output</span>: &#123;</span><br><span class="line">                <span class="attr">chunkFileNames</span>: <span class="string">&#x27;assets/[name].[hash].js&#x27;</span>,</span><br><span class="line">                <span class="attr">entryFileNames</span>: <span class="string">&#x27;assets/[name].[hash].js&#x27;</span>,</span><br><span class="line">                <span class="attr">assetFileNames</span>: <span class="string">&#x27;assets/[ext]/[name].[hash].[ext]&#x27;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="动态垫片"><a class="markdownIt-Anchor" href="#动态垫片"></a> 动态垫片</h5><p><strong>通过垫片服务根据UserAgent返回当前浏览器代码垫片</strong>，好处是无需将繁重的代码垫片打包进去。<br>每次构建都配置@babel/preset-env和core-js根据某些需求将Polyfill打包进来，这无疑又为代码体积增加了贡献</p><h5 id="压缩资源"><a class="markdownIt-Anchor" href="#压缩资源"></a> 压缩资源</h5><h6 id="服务开启-gzip-压缩"><a class="markdownIt-Anchor" href="#服务开启-gzip-压缩"></a> 服务开启 Gzip 压缩</h6><p>对常用文本资源 开启Gzip：</p><ul><li>HTML 文件：text/html（nginx 服务器默认就会压缩）、application/xhtml+xml</li><li>CSS 文件：text/css</li><li>JS 文件：application/x-javascript、application/javascript、text/javascript</li><li>JSON 文件（或者API请求结果）：application/json、application/geo+json、application/ld+json application/manifest+json、application/x-web-app-manifest+json</li><li>XML 文件：application/xml、application/atom+xml、application/rdf+xml、application/rss+xml</li><li>SVG 文件：image/svg+xml;</li></ul><ol><li>前端借助构建工具，预先生成gz文件，<code>缺点是构打包后构建的产物体积会变大</code>，优点是<strong>不耗费服务器的性能</strong>。</li></ol><ul><li>webpack安装 <code>compression-webpack-plugin</code></li><li>Vite 使用<code>vite-plugin-compression</code> 来实现</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CompressionPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;compression-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="attr">configurewebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE</span> <span class="variable constant_">ENV</span> === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// 为生产环境修改配置.</span></span><br><span class="line">            config.<span class="property">mode</span> = <span class="string">&#x27;production&#x27;</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">CompressionPlugin</span>(&#123;</span><br><span class="line">                    <span class="attr">test</span>: <span class="regexp">/\.js$|\.html$|\.css/</span>， <span class="comment">//匹配文件名</span></span><br><span class="line">                    <span class="attr">threshold</span>: <span class="number">10240</span>， <span class="comment">//对超过10k的数据进行压缩</span></span><br><span class="line">                    <span class="attr">deleteoriginalAssets</span>: <span class="literal">false</span> <span class="comment">//是否网除原文件</span></span><br><span class="line">                &#125;)]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>Nginx 服务器开启 Gzip 压缩</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Nginx 服务器配置文件中</span></span><br><span class="line">http &#123;</span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_types text / plain text / css application / javascript;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体可参考<a href="https://mp.weixin.qq.com/s?__biz=MzUxNzk1MjQ0Ng==&amp;mid=2247523536&amp;idx=1&amp;sn=542c32eb4c30b1a745739d386a0e1e1c&amp;chksm=f9929a01cee513175046083ade896aefda8b465110bf540a3179097a4956c88625e58a22a607&amp;scene=21#wechat_redirect">启用 Gzip 压缩</a></p><h6 id="最小化代码"><a class="markdownIt-Anchor" href="#最小化代码"></a> 最小化代码</h6><p>去除冗余字符（例如不必要的注释、空格符和换行符等），减少文件大小。</p><ul><li>JavaScript 代码的最小化和压缩： Rollup.js 和 Webpack 中都得到了应用，以降低代码体积、减少下载时间。</li><li>CSS，在 Webpack 中，通常会利用 mini-css-extract-plugin 插件进行优化。</li></ul><h6 id="压缩字体"><a class="markdownIt-Anchor" href="#压缩字体"></a> 压缩字体</h6><ol><li>TTF 字体更换为 WOFF2，体积减小 近60%</li><li>字体文件 取子集 按需压缩：借助三方工具</li></ol><h6 id="mp4-视频-优化"><a class="markdownIt-Anchor" href="#mp4-视频-优化"></a> MP4 视频 优化</h6><p>编码视频选择 “为 web 优化” 或 “为串流优化”的选项，将名称为 <code>moov</code> 的特殊 <code>atom</code> (包含 <strong>元数据信息</strong>)置于文件开头，让视频不必下载完成就可以播放，带来更好的用户体验</p><p><a href="https://macplay.github.io/posts/you-hua-mp4-shi-pin-yi-bian-geng-kuai-de-wang-luo-chuan-liu/">【译】优化 MP4 视频以便更快的网络串流</a></p><h5 id="图像处理"><a class="markdownIt-Anchor" href="#图像处理"></a> 图像处理</h5><ol><li>使用图片压缩工具，将图片压缩到合适大小，减少请求次数。</li><li>选择适合的图片格式。图像格式及应用场景：</li></ol><ul><li>SVG：用于 icon 和 logo，包含几何图形，无论缩放如何都保持清晰。</li><li>JPEG：适用于摄影图片，通过有损和无损优化减小文件大小。（适用于非透明的 banner图）</li><li>PNG：适用于高分辨率图片，无损压缩，而 WebP 整体上更小。</li><li>WebP：适用于高分辨率图片，支持无损和有损压缩，文件大小更小。（注意兼容性问题）</li><li>Video：对于动画，建议使用 video 而不是 GIF，因为 GIF 有颜色限制且文件大小较大。</li></ul><ol start="3"><li>远端图片控制：借助图床压缩服务，进行图片尺寸裁剪、压缩 等操作。</li></ol><p><a href="https://mp.weixin.qq.com/s?__biz=MzUxNzk1MjQ0Ng==&amp;mid=2247519669&amp;idx=1&amp;sn=f42979a3e683a46b23d43d314c15f391&amp;chksm=f85687b6ecd20ab1cdd6195def56d858b9e2408e6a61f7449326025e94707ee8e62662fecfc6&amp;xtrack=1&amp;scene=90&amp;subscene=93&amp;sessionid=1713184672&amp;flutter_pos=3&amp;clicktime=1713184918&amp;enterid=1713184918&amp;finder_biz_enter_id=4&amp;ranksessionid=1713183895&amp;ascene=56&amp;fasttmpl_type=0&amp;fasttmpl_fullversion=7164386-zh_CN-zip&amp;fasttmpl_flag=0&amp;realreporttime=1713184918058&amp;devicetype=android-33&amp;version=28003050&amp;nettype=3gnet&amp;abtest_cookie=AAACAA%3D%3D&amp;lang=zh_CN&amp;session_us=gh_247417697bfd&amp;countrycode=CN&amp;exportkey=n_ChQIAhIQMMY3QLAgGUyKUcndPPbGgRLfAQIE97dBBAEAAAAAAHNJMU%2BdJEMAAAAOpnltbLcz9gKNyK89dVj0c6mfklbBYwJhgOzTZU2xy1Tp3797sN%2BqAnUF05GHPIsthiD4mCdFKpKUGFM%2FeGwTiui1Mpzj1WqZPzt7meuJi8PDiap1LNOeAVAdBwIrGOTMqbfUd44uoPoRMYzNeiWAuDsPjuxtknUnA%2FhA7Qd2ClczYMLiXQR74sZTTcnZ7bGfuNcISGL66pk1Qok%2FPKvr2iORcJVA01HwIXpZQuXfvn1n3Jgz9Dd%2BBIhdX8k3vdbYroVNWYfcRUs%3D&amp;pass_ticket=4s4SzdgDMQcCq%2FGdi0xLXC8Y1g53YCfPHzYxQbLXb1kaXGvyIhVFfKK6TDBTt7CVtru1aYCqeuVjQ5%2F6ywm5Xw%3D%3D&amp;wx_header=3#">性能优化——图片压缩、加载和格式选择</a></p><h4 id="缓存类"><a class="markdownIt-Anchor" href="#缓存类"></a> 缓存类</h4><p><a href="https://www.cnblogs.com/web-learn/p/15213509.html">前端性能优化(三)——浏览器九大缓存方法</a></p><h5 id="利用http缓存"><a class="markdownIt-Anchor" href="#利用http缓存"></a> 利用http缓存</h5><ol><li>静态资源 优先 强缓存</li><li>同域公共资源提取，最大化利用 缓存共享</li></ol><p><a href="https://mp.weixin.qq.com/s?__biz=MzUxNzk1MjQ0Ng==&amp;mid=2247523463&amp;idx=1&amp;sn=5a567450ece5d1a7aae4a6e128b07b68&amp;chksm=f9929a56cee51340161ed59735e3fc8e554b6974310e67aeb85a6b8d1201493efba36aa1563c&amp;scene=21#wechat_redirect">前端性能优化-开启 HTTP 缓存</a></p><h5 id="利用indexdb-缓存"><a class="markdownIt-Anchor" href="#利用indexdb-缓存"></a> 利用indexDB 缓存</h5><p>利用indexDB 缓存 进行 图片、视频、音频等资源的缓存。如：地图项目常用于缓存瓦片数据。</p><p>特点：</p><ul><li>indexDB大小取决于你的硬盘，存储的数据量非常大。</li><li>可以直接存储任何类型的数据，如 js任何类型的数据 、blob流。</li><li>可以创建索引，提供高性能搜索功能。</li><li>采用事务，保证数据的准确性和一致性。</li></ul><h5 id="serviceworker"><a class="markdownIt-Anchor" href="#serviceworker"></a> ServiceWorker</h5><p>Service Worker 是一种在浏览器后台运行的脚本，它可以拦截网络请求，缓存资源，提供离线访问等功能。 <code>Service Worker</code> 借助了 <code>cacheStorage</code> 进行缓存</p><p>通常借助 <code>workbox-webpack-plugin</code> 进行配置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js:</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">WorkboxPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;workbox-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// Other webpack config...</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">// Other plugins...</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">WorkboxPlugin</span>.<span class="title class_">GenerateSW</span>(&#123;</span><br><span class="line">            <span class="attr">clientsClaim</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">skipWaiting</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">runtimeCaching</span>: [&#123;</span><br><span class="line">                <span class="attr">urlPattern</span>: <span class="regexp">/.\/*/</span>, <span class="comment">// 需要缓存的路径</span></span><br><span class="line">                <span class="attr">handler</span>: <span class="string">&#x27;StaleWhileRevalidate&#x27;</span>, <span class="comment">// 缓存策略</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                    <span class="attr">cacheName</span>: <span class="string">&#x27;my-webcache&#x27;</span>,</span><br><span class="line">                    <span class="attr">expiration</span>: &#123;</span><br><span class="line">                        <span class="attr">maxEntries</span>: <span class="number">2000</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;],</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>或者直接使用 <code>workbox-build</code> 进行构建。</p><p><a href="https://sync.liveme.com/app/arablive/anchortask/index.html#/">调试示例</a></p><p><a href="https://juejin.cn/post/7165893682132959245">ServiceWorker 让你的网页拥抱服务端的能力</a><br><a href="https://segmentfault.com/a/1190000044363962">WorkBox 之底层逻辑Service Worker</a><br><a href="https://juejin.cn/post/7443159206318686246">使用 Service Worker 让首页秒开</a><br><a href="https://juejin.cn/post/7329280514628534313">前端更新部署后通知用户刷新</a></p><h5 id="离线包"><a class="markdownIt-Anchor" href="#离线包"></a> 离线包</h5><p>离线包个家实现方式各有不同，本质是要依赖 客户端完成。<br>相较于 <code>ServiceWorker</code> 方案，离线包 可以解决用户第一次访问 慢的问题。</p><p><a href="https://juejin.cn/post/7103348563479887885?from=search-suggest">货拉拉H5离线包原理与实践</a><br><a href="https://juejin.cn/post/7200552990737121337#heading-8">离线包实现详解</a><br><a href="https://juejin.cn/post/6844904031773523976">Hybrid App 离线包方案实践</a></p><h3 id="渲染层面"><a class="markdownIt-Anchor" href="#渲染层面"></a> 渲染层面</h3><blockquote><p>就是我们拿到文件后页面开始渲染并且交互的过程<br>渲染层面的配置就 落实到我们前端的<strong>具体技术细节</strong>上</p></blockquote><h4 id="阻塞策略"><a class="markdownIt-Anchor" href="#阻塞策略"></a> 阻塞策略：</h4><p>位置放</p><body>底部，让JS不阻塞HTML和CSS的解析<br>脚本与DOM/其它脚本的依赖关系很强：对 <code>&lt;script&gt;设置defer</code><p></p><p>脚本与DOM/其它脚本的依赖关系不强：对 <code>&lt;script&gt;设置async</code></p><h4 id="css策略"><a class="markdownIt-Anchor" href="#css策略"></a> CSS策略：</h4><p>避免-多层的嵌套规则<br>避免-为ID选择器添加多余选择器<br>避免-使用通配选择器，只对目标节点声明规则</p><h4 id="dom策略减少回流重绘"><a class="markdownIt-Anchor" href="#dom策略减少回流重绘"></a> DOM策略：（减少回流重绘）</h4><p>缓存DOM计算属性<br>避免频繁操作 DOM<br>使用display控制DOM显隐，将DOM离线化<br>修改DOM时把其包装成微任务<br>使用 transform 代替 top/left 修改位置</p><h4 id="代码实践策略"><a class="markdownIt-Anchor" href="#代码实践策略"></a> 代码实践策略：</h4><h5 id="懒加载策略"><a class="markdownIt-Anchor" href="#懒加载策略"></a> 懒加载策略</h5><ol><li><p>图片-懒加载：非必要图片 延后加载</p></li><li><p>图片-渐进式处理：</p><ul><li>使用响应式图像 (srcset 和 sizes 属性) 根据设备尺寸加载合适的图像</li><li>小图先出，大图后出 <a href="https://mp.weixin.qq.com/s/UzSE1HHyXJNIupq6KRSR5Q">前端体验优化之渐进式图片</a></li></ul></li><li><p>代码业务懒加载（路由、模块、 多语言）</p></li><li><p>视频 利用 Video标签的Preload 延后加载</p></li></ol><ul><li>none: 表示视频不应预加载。</li><li>metadata: 表示仅获取视频元数据（例如长度）。</li><li>auto: 表示整个视频文件可以下载，即使用户预计不会使用它。</li><li>空字符串: auto 值的同义词。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span> <span class="attr">preload</span>=<span class="string">&quot;none&quot;</span> <span class="attr">poster</span>=<span class="string">&quot;placeholder.jpg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;video.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        Your browser doesn&#x27;t support HTML video. Here is a</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;myVideo.mp4&quot;</span> <span class="attr">download</span>=<span class="string">&quot;myVideo.mp4&quot;</span>&gt;</span>link to the video<span class="tag">&lt;/<span class="name">a</span>&gt;</span> instead.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="预加载策略"><a class="markdownIt-Anchor" href="#预加载策略"></a> 预加载策略</h5><ol><li>借助<link>进行 预加载、预渲染、预获取</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 顾名思义，提前加载资源（未用到），首先要确定这个资源一定会在未来用到，然后提前加载，放入浏览器缓存中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;image.png&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 指定的预获取资源具有最高的优先级，在所有 prefetch 项之前进行 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;subresource&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- # Prerender 预先加载的资源文件，也就是说可以让浏览器提前加载指定页面的所有资源 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;prerender&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/index.html&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>使用 js 预加载资源，为后面页面、模块使用做准备</li></ol><h5 id="对于-ui-改动推荐使用requestanimationframe"><a class="markdownIt-Anchor" href="#对于-ui-改动推荐使用requestanimationframe"></a> 对于 UI 改动，推荐<strong>使用requestAnimationFrame</strong></h5><p>浏览器会在下次重绘时调用该方法，相较于 setInterval 或 setTimeout，它能够更智能地在浏览器的帧渲染中进行优化。<br>使用 setInterval 或 setTimeout 有可能导致回调在帧的某个点运行，可能在帧的末尾，这通常导致错过一帧，从而导致界面卡顿。<br>而 requestAnimationFrame 可以确保回调在浏览器准备好进行下一次重绘时执行，使得动画效果更加流畅。</p><h5 id="避免长任务代码优化-执行时间超过-50-毫秒的任务"><a class="markdownIt-Anchor" href="#避免长任务代码优化-执行时间超过-50-毫秒的任务"></a> 避免长任务，代码优化 （执行时间超过 50 毫秒的任务）</h5><ol><li>使用 requestIdleCallback 空闲时间处理任务， 是一种优化手段 可在 主线程 空闲时调度执行低优先级或后台任务，以提高页面的响应性</li><li>利用 Promise.then 、queueMicrotask 微任务 进行包装，延后任务处理</li><li>scheduler.postTask 允许以更细粒度的方式调度任务，并且是一种帮助浏览器确定任务优先级的方法，确保低优先级任务可以释放main thread的机制。尽管目前大多数浏览器并不全面支持，但可在<a href="https://developer.mozilla.org/en-US/docs/Web/API/Scheduler/postTask">这里</a>获取详细信息。</li><li>使用 Web Workers 处理耗时任务【web worker 可以让主线程另起新的线程来运行脚本】</li></ol><p>相关推荐：<br><a href="https://juejin.cn/post/7159807927908302884">如何减少卡顿的代码级别详细文章</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzA4Nzg0MDM5Nw==&amp;mid=2247522591&amp;idx=1&amp;sn=9a8ac7b263e34102b5a85e83e0ae6f5b&amp;chksm=91fa733de3ae322228c38fe295c6a0d9203ab593de5d71fbd572e4bb6b5934ac85454e9a60dc&amp;xtrack=1&amp;scene=90&amp;subscene=93&amp;sessionid=1741175972&amp;flutter_pos=0&amp;clicktime=1741175974&amp;enterid=1741175974&amp;finder_biz_enter_id=4&amp;ranksessionid=1741175969&amp;ascene=56&amp;fasttmpl_type=0&amp;fasttmpl_fullversion=7630986-zh_CN-zip&amp;fasttmpl_flag=0&amp;realreporttime=1741175974985&amp;devicetype=android-34&amp;version=2800385b&amp;nettype=WIFI&amp;abtest_cookie=AAACAA%3D%3D&amp;lang=zh_CN&amp;session_us=gh_f467f90bb179&amp;countrycode=CN&amp;exportkey=n_ChQIAhIQn9ufttRBavPlaxnkK8UshRLlAQIE97dBBAEAAAAAAJ80KlNNtxwAAAAOpnltbLcz9gKNyK89dVj0A9amqKgOlthwrn7ZPpbClMP80xYbE4Yuv%2FY3bS4AydtYTpgzlgiIbORDEXknSvmxGOzx2KpN%2BrM%2B3no3pkhZSEWt7fAhQXWM9Jo3O96a%2BNW7A11Hoe6RuQC%2BPoUsKJTIGX%2FKgQciTspQhYyw%2BDtQQdAGNbZOv0za1wpqhyD15ctfT3TQ6b24rFwguNVF5GubeiUltz7hkIe8%2FChtYCf8wO1utTPEqAhGA%2BbOKRkYqiVGOancEafBrUqT08Ah%2Bso%3D&amp;pass_ticket=%2FX5l9a8hhT1mf1CbTbd7zScpvriB7sp%2FR%2B5kPWN%2F1h530WdXGiGmjTCY8j%2FkfIiN&amp;wx_header=3">7种在 JavaScript 中分解长任务的技术</a><br><a href="https://juejin.cn/post/7137728629986820126">一文彻底了解Web Worker，十万条数据都是弟弟</a></p><h4 id="首页处理"><a class="markdownIt-Anchor" href="#首页处理"></a> 首页处理</h4><ol><li>loding</li><li>骨架屏</li><li>SSR ( 需要注意 html体积，尽量只预先渲染 首屏内容)</li></ol><p>(一文彻底说清楚SSR渲染)[<a href="https://mp.weixin.qq.com/s/6pnp8F6j8MSxP7iPp_YepA">https://mp.weixin.qq.com/s/6pnp8F6j8MSxP7iPp_YepA</a>]</p></body></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://mcdowell8023.github.io/2024/04/10/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-2-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E4%B8%8D%E5%90%8C%E8%8A%82%E7%82%B9%E7%9A%84%E4%BC%98%E5%8C%96/" title="前端项目优化-2. 性能优化-不同节点的优化" target="_blank" rel="external">http://mcdowell8023.github.io/2024/04/10/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-2-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E4%B8%8D%E5%90%8C%E8%8A%82%E7%82%B9%E7%9A%84%E4%BC%98%E5%8C%96/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/mcdowell8023" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/mcdowell8023" target="_blank"><span class="text-dark">mcdowell</span><small class="ml-1x">Web 前端 &amp; 90后</small></a></h3><div>一线前端从业人员。</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2024/05/12/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-3-%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96-%E7%94%A8%E6%88%B7%E4%BA%A4%E4%BA%92/" title="前端项目优化-3. 体验优化-用户交互"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a></li><li class="next"><a href="/2024/03/04/web/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-1-%E6%A2%B3%E7%90%86%E6%BA%90%E5%A4%B4-%E4%BB%8E%E8%BE%93%E5%85%A5url%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%91%88%E7%8E%B0/" title="前端项目优化-1. 梳理源头-输入url到页面呈现"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/mcdowell8023" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="https://www.linkedin.com/in/%E6%98%BE%E8%B6%85-%E5%AD%9F-688582107/" target="_blank" title="Linkedin" data-toggle="tooltip" data-placement="top"><i class="icon icon-linkedin"></i></a></li><li><a href="https://mcdowell8023.gitee.io/" target="_blank" title="Coding" data-toggle="tooltip" data-placement="top"><i class="icon icon-coding"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright">&copy; 2025 mcdowell<div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html>