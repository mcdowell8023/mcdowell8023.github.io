---
title: 透视http协议笔记
comments: true
mathjax: true
categories:
  - 基础
tags:
  - 笔记
  - http
date: 2020-05-22 08:25:58
---

## HTTP 的前世今生

### 史前

- **20 世纪 60 年代，美国国防部高等研究计划署（ARPA）建立了 ARPA 网**，它有四个分布在各地的节点，被认为是如今互联网的“始祖”。
- **在 70 年代，基于对 ARPA 网的实践和思考，研究人员发明出了著名的 TCP/IP 协议**。由于具有良好的**分层结构和稳定的性能**，TCP/IP 协议迅速战胜其他竞争对手流行起来，**并在 80 年代中期进入了 UNIX 系统内核，促使更多的计算机接入了互联网**。

### 创世纪 - 1989

1989 年，任职于欧洲核子研究中心（CERN）的蒂姆·伯纳斯 - 李发表了一篇论文，提出了在互联网上构建超链接文档系统，把这个系统称为“**万维网**”（World Wide Web），也就是我们现在所熟知的 Web。

- URI：即**统一资源标识符**，作为互联网上资源的唯一身份；
- HTML：即**超文本标记语言**，描述超文本文档；
- HTTP：即**超文本传输协议**，用来传输超文本。

### HTTP/0.9 - 20 世纪 90 年代

- 结构比较简单，采用了纯文本格式 【20 世纪 90 年代初期，计算机处理能力低，存储容量小，网速很慢，为了便于服务器和客户端处理】
- **只允许用“GET”动作从服务器上获取 HTML 文档**【最初设想的系统里的文档都是只读的】
- 响应请求之后立即关闭连接

### HTTP/1.0 - 1996

> 1996 年正式发布 HTTP/1.0,然而不是一个“标准”，只是记录已有实践和模式的一份参考文档，不具有实际的约束力，相当于一个“备忘录”

1. 增加了 HEAD、POST 等新方法；
2. 增加了响应状态码，标记可能的错误原因；
3. 引入了协议版本号概念；
4. 引入了 HTTP Header（头部）的概念，让 HTTP 处理请求和响应更加灵活；
5. 传输的数据不再仅限于文本

> 1993 年，NCSA（美国国家超级计算应用中心）开发出了 Mosaic，是第一个可以图文混排的浏览器，随后又在 1995 年开发出了服务器软件 Apache，简化了 HTTP 服务器的搭建工作。同一时期，计算机多媒体技术也有了新的发展：1992 年发明了 JPEG 图像格式，1995 年发明了 MP3 音乐格式。 从用户需求的角度促进了 HTTP 的发展。

### HTTP/1.1 - 1999

> 得益于 1995 年，网景和微软开始的“浏览器大战” 推动了 Web 的发展，HTTP/1.0 经受了实践检验。
> “浏览器大战”结束之后的 1999 年，HTTP/1.1 发布了 RFC 文档，编号为 2616，正式确立了延续十余年的传奇。
> 它是一个“正式的标准”，所有的浏览器、服务器、网关、代理等等，只要用到 HTTP 协议，就必须严格遵守这个标准，相当于是互联网世界的一个“立法”

1. 增加了 PUT、DELETE 等新的方法；
2. 增加了缓存管理和控制；
3. 明确了连接管理，允许持久连接；
4. 允许响应数据分块（chunked），利于传输大文件；
5. 强制要求 Host 头，让互联网主机托管成为可能

### HTTP/2 - 2015

HTTP/1.1 发布之后，整个互联网世界呈现出了爆发式的增长，度过了十多年，对于 HTTP 出现了不满的意见：
主要就是连接慢，但 HTTP/1.1 标准一直“岿然不动”，无奈之下人们只好发明各式各样的“小花招”来缓解这些问题，比如以前常见的切图、JS 合并等网页优化手段。

搜索巨头 Google 忍不住了，决定“揭竿而起”。首先开发了自己的浏览器 Chrome，然后推出了新的 **SPDY 协议**（2009 年，基于 TCP ），并在 Chrome 里应用于自家的服务器，这也开启了第二次的“浏览器大战”，Chrome 目前的全球的占有率超过了 60%。Google 借此顺势把 SPDY 推上了标准的宝座，互联网标准化组织以 SPDY 为基础开始制定新版本的 HTTP 协议，最终在 **2015 年发布了 HTTP/2，RFC 编号 7540**。

HTTP/2 的制定充分考虑了现今互联网的现状：宽带、移动、不安全，在高度兼容 HTTP/1.1 的同时改善性能

1. 二进制协议，不再是纯文本；
2. 可发起多个请求，废弃了 1.1 里的管道；
3. 使用专用算法压缩头部，减少数据传输量；
4. 允许服务器主动向客户端推送数据；
5. 增强了安全性，“事实上”要求加密通信。

> HTTP/2 到今天已经四岁，也衍生出了 gRPC 等新协议，但由于 HTTP/1.1 实在是太过经典和强势，目前它的普及率还比较低，大多数网站使用的仍然还是 20 年前的 HTTP/1.1

### HTTP/3 - 2018

> 无论 SPDY 还是 HTTP/2，都是基于 TCP 的，TCP 与 UDP 相比效率上存在天然的劣势

这次，还是 Google，而且它要“革自己的命”。

在 HTTP/2 还处于草案之时，2013 年 Google 开发了基于 UDP 的名为 QUIC 的传输层协议，QUIC 全称 Quick UDP Internet Connections，希望它能替代 TCP，使得网页传输更加高效。
2018 年，互联网标准化组织 IETF 提议将“HTTP over QUIC”更名为“HTTP/3”并获得批准，HTTP/3 正式进入了标准化制订阶段，也许两三年后就会正式发布，到时候我们很可能会跳过 HTTP/2 直接进入 HTTP/3。

[HTTP/3 原理与实践](https://mp.weixin.qq.com/s/iF0wbV5o7HVjGG_Cb-RcOg)

### 总结

![http 历史](/images/http/history.jpeg)

- HTTP 协议始于三十年前蒂姆·伯纳斯 - 李的一篇论文；
- HTTP/0.9 是个简单的文本协议，只能获取文本资源；
- HTTP/1.0 确立了大部分现在使用的技术，但它不是正式标准；
- HTTP/1.1 是目前互联网上使用最广泛的协议，功能也非常完善；
- HTTP/2 基于 Google 的 SPDY 协议，注重性能改善，但还未普及；
- HTTP/3 基于 Google 的 QUIC 协议，是将来的发展方向。
